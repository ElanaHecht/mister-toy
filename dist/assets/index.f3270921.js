import{r as m,o as c,c as d,a as s,b as f,w as T,d as u,F as x,e as A,f as b,v as C,g as w,h as D,i as B,t as h,j as N,k as F,l as O,m as P,n as V,p as q,q as z}from"./vendor.3bc49b9f.js";const M=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};M();var y=(e,t)=>{const o=e.__vccOpts||e;for(const[l,n]of t)o[l]=n;return o};const R={},L={class:"main-header flex items-center justify-between"},E=s("div",{class:"logo uppercase"},[s("h2",null,"Toys")],-1),H={class:"flex gap-1"},U=u("Home"),J=u("Toy");function j(e,t){const o=m("router-link");return c(),d("header",L,[E,s("nav",H,[f(o,{class:"link",to:"/"},{default:T(()=>[U]),_:1}),f(o,{class:"link",to:"/toy"},{default:T(()=>[J]),_:1})])])}var W=y(R,[["render",j]]);const G={name:"App",components:{appHeader:W}},K=s("h1",null,"Mister Toy",-1);function Y(e,t,o,l,n,r){const a=m("app-header"),i=m("router-view");return c(),d(x,null,[K,f(a),f(i)],64)}var Q=y(G,[["render",Y]]);const X={name:"Home",data(){return{}}},Z={class:"home-page"},ee=s("h1",null,"Home page",-1),te=[ee];function oe(e,t,o,l,n,r){return c(),d("section",Z,te)}var re=y(X,[["render",oe]]);const v={query:_,get:ne,post:se,put:le,remove:ae,postMany:ie};function _(e){var t=JSON.parse(localStorage.getItem(e))||[];return Promise.resolve(t)}function ne(e,t){return _(e).then(o=>o.find(l=>l._id===t))}function se(e,t){return t._id=ce(),_(e).then(o=>(o.push(t),k(e,o),t))}function ie(e,t){return _(e).then(o=>(o.push(...t),k(e,o),o))}function le(e,t){return _(e).then(o=>{const l=o.findIndex(n=>n._id===t._id);return o.splice(l,1,t),k(e,o),t})}function ae(e,t){return _(e).then(o=>{const l=o.findIndex(n=>n._id===t);o.splice(l,1),k(e,o)})}function k(e,t){localStorage.setItem(e,JSON.stringify(t))}function ce(e=8){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=0;l<e;l++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}const $={saveToStorage:ue,loadFromStorage:de,makeId:ye};function ue(e,t){localStorage.setItem(e,JSON.stringify(t)||null)}function de(e){let t=localStorage.getItem(e);return t?JSON.parse(t):void 0}function ye(e=8){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=0;l<e;l++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}const p="toys_db";ve();const S={query:me,getById:pe,remove:fe,save:_e,getEmptyToy:he};function me(){return v.query(p)}function pe(e){const t=v.get(p,e),o="I bought this toy and it is amazing!";return t.reviews.push(o)}function fe(e){return v.remove(p,e)}function _e(e){return e._id?v.put(p,e):v.post(p,e)}function he(){return{name:"",price:0,labels:[],createdAt:Date.now(),inStock:!0,reviews:["I love this toy!"]}}function ve(){let e=$.loadFromStorage(p);return(!e||!e.length)&&(e=[{_id:"t101",name:"Talking Doll",price:123,labels:["Doll","Battery Powered","Baby"],createdAt:1631031801011,inStock:!0,reviews:["This is a terrible toy. Do not buy!"]},{_id:"t102",name:"Remote Robot",price:98,labels:["Doll","Battery Powered","Outdoor"],createdAt:1631031701011,inStock:!0,reviews:["This is an awesome toy. Buy it now!"]},{_id:"t103",name:"Hot Wheels",price:105,labels:["On wheels","Battery Powered","Outdoor"],createdAt:1631031601011,inStock:!0,reviews:["This is a terrible toy. Do not buy!"]},{_id:"t104",name:"Van Gogh Puzzle",price:145,labels:["Art","Puzzle","Box game"],createdAt:1631031501011,inStock:!0,reviews:["This is an awesome toy. Buy it now!"]},,],$.saveToStorage(p,e)),e}const ge={name:"toy-filter",data(){return{filterBy:{name:"",inStock:!0,label:"on wheels",sortBy:"name"}}},methods:{setFilter(){this.$emit("setFilter",this.filterBy)},toggleInStock(){this.filterBy.inStock=!this.filterBy.inStock}}},be={class:"toy-filter"},Se=s("label",{for:"stock"},"In Stock",-1),Te=s("label",{for:"labels"},"Choose a category:",-1),ke=D('<option value="on wheels">On Wheels</option><option value="box game">Box Game</option><option value="art">Art</option><option value="baby">Baby</option><option value="doll">Doll</option><option value="puzzle">Puzzle</option><option value="outdoor">Outdoor</option>',7),we=[ke],Be=u(" Name"),$e=u(" Price"),xe=u(" Created");function Fe(e,t,o,l,n,r){const a=A("focus");return c(),d("section",be,[b(s("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>n.filterBy.name=i),onInput:t[1]||(t[1]=(...i)=>r.setFilter&&r.setFilter(...i)),type:"text",class:"form-input",placeholder:"Search toy name"},null,544),[[a],[C,n.filterBy.name]]),s("input",{type:"checkbox",id:"stock",onChange:t[2]||(t[2]=(...i)=>r.toggleInStock&&r.toggleInStock(...i)),checked:""},null,32),Se,Te,s("select",{name:"labels",id:"labels",onChange:t[3]||(t[3]=(...i)=>r.setFilter&&r.setFilter(...i)),multiple:""},we,32),s("div",null,[s("label",null,[b(s("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=i=>n.filterBy.sortBy=i),onChange:t[5]||(t[5]=(...i)=>r.setFilter&&r.setFilter(...i)),value:"name",hidden:""},null,544),[[w,n.filterBy.sortBy]]),Be]),s("label",null,[b(s("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=i=>n.filterBy.sortBy=i),onChange:t[7]||(t[7]=(...i)=>r.setFilter&&r.setFilter(...i)),value:"1",hidden:""},null,544),[[w,n.filterBy.sortBy,void 0,{number:!0}]]),$e]),s("label",null,[b(s("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=i=>n.filterBy.sortBy=i),onChange:t[9]||(t[9]=(...i)=>r.setFilter&&r.setFilter(...i)),value:"-1",hidden:""},null,544),[[w,n.filterBy.sortBy,void 0,{number:!0}]]),xe])])])}var Ie=y(ge,[["render",Fe]]);const Ae={},Ce={class:"custom-card flex flex-col gap-1 items-center"};function De(e,t){return c(),d("article",Ce,[s("header",null,[B(e.$slots,"header",{},void 0,!0)]),s("main",null,[B(e.$slots,"default",{},void 0,!0)]),s("footer",null,[B(e.$slots,"footer",{},void 0,!0)])])}var Ne=y(Ae,[["render",De],["__scopeId","data-v-78833dbb"]]);const Oe={name:"toy-preview",props:{toy:Object},components:{customCard:Ne},methods:{goToDetail(){this.$router.push(`/toy/${this.toy.id}`)},goToEdit(){this.$router.push(`/toy/edit/${this.toy.id}`)},removeToy(e){this.$emit("removeToy",e)}},computed:{labels(){return this.toy.labels.toString()},inStock(){return this.toy.inStock?"Yes":"No"}}},Pe={class:"toy-preview"},Ve=s("span",{class:"fw-bold"},"Name:",-1),qe=s("span",{class:"fw-bold"},"Price:",-1),ze=s("span",{class:"fw-bold"},"Labels:",-1),Me=s("span",{class:"fw-bold"},"Created:",-1),Re=s("span",{class:"fw-bold"},"In stock?",-1),Le={class:"btn-group"};function Ee(e,t,o,l,n,r){const a=m("custom-card");return c(),d("li",Pe,[f(a,null,{header:T(()=>[s("p",null,[Ve,u(" "+h(o.toy.name),1)]),s("p",null,[qe,u(" "+h(e.$filters.currencyUSD(o.toy.price)),1)]),s("p",null,[ze,u(" "+h(r.labels),1)]),s("p",null,[Me,u(" "+h(e.$filters.timeFormat(o.toy.createdAt)),1)]),s("p",null,[Re,u(" "+h(r.inStock),1)])]),footer:T(()=>[s("div",Le,[s("button",{onClick:t[0]||(t[0]=(...i)=>r.goToEdit&&r.goToEdit(...i)),class:"btn btn-primary"},"edit"),s("button",{onClick:t[1]||(t[1]=(...i)=>r.goToDetail&&r.goToDetail(...i)),class:"btn btn-info"},"details"),s("button",{onClick:t[2]||(t[2]=i=>r.removeToy(o.toy._id)),class:"btn btn-danger"}," delete ")])]),_:1})])}var He=y(Oe,[["render",Ee]]);const Ue={props:{toys:{type:Array,required:!0}},components:{toyPreview:He},methods:{removeToy(e){this.$emit("removeToy",e)}}},Je={class:"toy-list clean-list"};function je(e,t,o,l,n,r){const a=m("toy-preview");return c(),d("ul",Je,[(c(!0),d(x,null,N(o.toys,i=>(c(),F(a,{onRemoveToy:r.removeToy,toy:i,key:i._id},null,8,["onRemoveToy","toy"]))),128))])}var We=y(Ue,[["render",je]]);const Ge={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys},toysToShow(){if(!this.filterBy)return this.toys;const e=new RegExp(this.filterBy.name,"i");return this.toys.filter(t=>e.test(t.name))}},created(){},methods:{loadToys(){S.query().then(e=>this.toys=e)},setFilter(e){this.filterBy=e},goToEdit(){this.$router.push("/toy/edit")},removeToy(e){this.$store.dispatch({type:"removeToy",id:e})}},components:{toyList:We,toyFilter:Ie}},Ke={class:"toy-app"};function Ye(e,t,o,l,n,r){const a=m("toy-filter"),i=m("toy-list");return c(),d("section",Ke,[s("button",{onClick:t[0]||(t[0]=(...I)=>r.goToEdit&&r.goToEdit(...I)),class:"btn btn-secondary"},"Add a new toy"),f(a,{onSetFilter:r.setFilter},null,8,["onSetFilter"]),r.toys?(c(),F(i,{key:0,onRemoveToy:r.removeToy,toys:r.toysToShow},null,8,["onRemoveToy","toys"])):O("",!0)])}var Qe=y(Ge,[["render",Ye]]);const Xe=P({history:V(),linkActiveClass:"active",routes:[{path:"/",name:"home-page",component:re},{path:"/toy",name:"toy-app",component:Qe}]});var Ze={state:{toys:null},getters:{toys(e){return e.toys}},mutations:{setToys(e,{toys:t}){e.toys=t},removeToy(e,{id:t}){const o=e.toys.findIndex(l=>l.id===t);e.toys.splice(o,1)},saveToy(e,{toy:t}){const o=e.toys.findIndex(l=>l.id===t.id);o!==-1?e.toys.splice(o,1,t):e.toys.push(t)}},actions:{loadToys({commit:e}){S.query().then(t=>{e({type:"setToys",toys:t})})},removeToy({commit:e},{id:t}){S.remove(t).then(()=>{e({type:"removeToy",id:t})})},saveToy({commit:e},{toy:t}){S.save(t).then(o=>{e({type:"saveToy",toy:o})})}}};const et=q({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:Ze}}),tt={mounted:e=>{e.focus()}};const g=z(Q);g.config.globalProperties.$filters={currencyUSD(e){return"$"+e},timeFormat(e){return new Date(e).toDateString()}};g.directive("focus",tt);g.use(Xe);g.use(et);g.mount("#app");
