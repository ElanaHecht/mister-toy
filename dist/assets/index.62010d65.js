import{r as p,o as i,c as d,a as s,b as _,w as v,d as y,e as w,f as P,g as C,v as E,F as B,h as S,i as g,j as x,t as f,k as F,l as $,m as O,C as V,n as N,P as I,p as U,q as L,s as q,u as H,x as R}from"./vendor.11f0c8ae.js";const M=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}};M();var m=(e,t)=>{const r=e.__vccOpts||e;for(const[a,o]of t)r[a]=o;return r};const z={},j={class:"main-header flex items-center justify-between"},J=s("div",{class:"logo uppercase"},[s("h1",null,"Mister Toy")],-1),W={class:"flex gap-1"},Y=y("Home"),G=y("Toy"),K=y("Dashboard");function Q(e,t){const r=p("router-link");return i(),d("header",j,[J,s("nav",W,[_(r,{class:"link",to:"/"},{default:v(()=>[Y]),_:1}),_(r,{class:"link",to:"/toy"},{default:v(()=>[G]),_:1}),_(r,{class:"link",to:"/dashboard"},{default:v(()=>[K]),_:1})])])}var X=m(z,[["render",Q]]);const Z={name:"app",components:{appHeader:X},created(){this.$store.dispatch({type:"loadToys"})}},ee={class:"app-container container"};function te(e,t,r,a,o,n){const l=p("app-header"),u=p("router-view");return i(),d("section",ee,[_(l),_(u)])}var oe=m(Z,[["render",te]]);const se={name:"Home"},ne={class:"home-page"},re=s("h1",null,"Home page",-1),le=[re];function ae(e,t,r,a,o,n){return i(),d("section",ne,le)}var ie=m(se,[["render",ae]]);const ce={name:"toy-filter",data(){return{filterBy:{name:"",inStock:w(!0),labels:w([]),sortBy:w("")},labelOptions:[{value:"On Wheels",label:"On Wheels"},{value:"Box Game",label:"Box Game"},{value:"Art",label:"Art"},{value:"Baby",label:"Baby"},{value:"Doll",label:"Doll"},{value:"Puzzle",label:"Puzzle"},{value:"Outdoor",label:"Outdoor"}],sortOptions:[{value:"name",label:"Name"},{value:"price",label:"Price"},{value:"created",label:"Created"}]}},methods:{setFilter(){console.log("this.filterBy:",this.filterBy),this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))}}},ue={class:"toy-filter"},de=s("p",null,"Filter by:",-1),ye={class:"form-container"};function pe(e,t,r,a,o,n){const l=p("el-checkbox"),u=p("el-option"),k=p("el-select"),D=P("focus");return i(),d("section",ue,[de,s("div",ye,[C(s("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>o.filterBy.name=c),onInput:t[1]||(t[1]=(...c)=>n.setFilter&&n.setFilter(...c)),type:"text",class:"form-input",placeholder:"Toy name"},null,544),[[D],[E,o.filterBy.name]]),s("span",null,[_(l,{class:"checkmark",modelValue:o.filterBy.inStock,"onUpdate:modelValue":t[2]||(t[2]=c=>o.filterBy.inStock=c),onChange:n.setFilter,label:"In Stock",size:"large"},null,8,["modelValue","onChange"])]),_(k,{modelValue:o.filterBy.labels,"onUpdate:modelValue":t[3]||(t[3]=c=>o.filterBy.labels=c),onChange:n.setFilter,multiple:"",placeholder:"Label",style:{width:"240px"}},{default:v(()=>[(i(!0),d(B,null,S(o.labelOptions,c=>(i(),g(u,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_(k,{modelValue:e.value,"onUpdate:modelValue":t[5]||(t[5]=c=>e.value=c),placeholder:"Sort by"},{default:v(()=>[(i(!0),d(B,null,S(o.sortOptions,c=>(i(),g(u,{onChange:n.setFilter,modelValue:o.filterBy.sortBy,"onUpdate:modelValue":t[4]||(t[4]=A=>o.filterBy.sortBy=A),key:c.value,label:c.label,value:c.value,disabled:c.disabled},null,8,["onChange","modelValue","label","value","disabled"]))),128))]),_:1},8,["modelValue"])])}var me=m(ce,[["render",pe]]);const fe={},_e={class:"custom-card flex flex-col gap-1 items-center"};function he(e,t){return i(),d("article",_e,[s("header",null,[x(e.$slots,"header",{},void 0,!0)]),s("main",null,[x(e.$slots,"default",{},void 0,!0)]),s("footer",null,[x(e.$slots,"footer",{},void 0,!0)])])}var ve=m(fe,[["render",he],["__scopeId","data-v-e49d6808"]]);const be={name:"toy-preview",props:{toy:Object},components:{customCard:ve},methods:{goToDetail(){this.$router.push(`/toy/${this.toy._id}`)},goToEdit(){this.$router.push(`/toy/edit/${this.toy._id}`)},removeToy(e){console.log("removed toy:",e),this.$emit("removeToy",e)}},computed:{inStock(){return this.toy.inStock?"Yes":"No"}}},ge={class:"toy-preview"},$e=s("span",{class:"fw-bold"},"Name:",-1),Te=s("span",{class:"fw-bold"},"Price:",-1),ke=s("span",{class:"fw-bold"},"Labels:",-1),Be=s("span",{class:"fw-bold"},"Created:",-1),Se=s("span",{class:"fw-bold"},"In stock?",-1),we={class:"btn-group"};function xe(e,t,r,a,o,n){const l=p("custom-card");return i(),d("li",ge,[_(l,null,{header:v(()=>[s("p",null,[$e,y(" "+f(r.toy.name),1)]),s("p",null,[Te,y(" "+f(e.$filters.currencyUSD(r.toy.price)),1)]),ke,(i(!0),d(B,null,S(r.toy.labels,u=>(i(),d("p",{class:"flex",key:u},f(u),1))),128)),s("p",null,[Be,y(" "+f(e.$filters.timeFormat(r.toy.createdAt)),1)]),s("p",null,[Se,y(" "+f(n.inStock),1)])]),footer:v(()=>[s("div",we,[s("button",{onClick:t[0]||(t[0]=(...u)=>n.goToEdit&&n.goToEdit(...u)),class:"btn btn-primary"},"edit"),s("button",{onClick:t[1]||(t[1]=(...u)=>n.goToDetail&&n.goToDetail(...u)),class:"btn btn-info"},"details"),s("button",{onClick:t[2]||(t[2]=u=>n.removeToy(r.toy._id)),class:"btn btn-danger"}," delete ")])]),_:1})])}var Ce=m(be,[["render",xe]]);const Ee={name:"toy-list",props:{toys:{type:Array,required:!0}},components:{toyPreview:Ce},created(){console.log(this.toys)},methods:{removeToy(e){this.$emit("removeToy",e)}}},Fe={class:"toy-list clean-list grid gap-3"};function De(e,t,r,a,o,n){const l=p("toy-preview");return i(),d("ul",Fe,[(i(!0),d(B,null,S(r.toys,u=>(i(),g(l,{onRemoveToy:n.removeToy,toy:u,key:u._id},null,8,["onRemoveToy","toy"]))),128))])}var Ae=m(Ee,[["render",De]]);const Pe={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys},toysToShow(){if(!this.filterBy)return this.toys;const e=new RegExp(this.filterBy.name,"i");return this.toys.filter(t=>e.test(t.name))}},created(){},methods:{setFilter(e){this.filterBy=e},removeToy(e){this.$store.dispatch({type:"removeToy",id:e})},goToEdit(){this.$router.push("/toy/edit/")}},components:{toyList:Ae,toyFilter:me}},Oe={class:"toy-app"};function Ve(e,t,r,a,o,n){const l=p("toy-filter"),u=p("toy-list");return i(),d("section",Oe,[_(l,{onSetFilter:n.setFilter},null,8,["onSetFilter"]),n.toys?(i(),g(u,{key:0,onRemoveToy:n.removeToy,toys:n.toysToShow},null,8,["onRemoveToy","toys"])):F("",!0),s("button",{onClick:t[0]||(t[0]=(...k)=>n.goToEdit&&n.goToEdit(...k)),class:"btn btn-secondary"},"Add a new toy")])}var Ne=m(Pe,[["render",Ve]]);const Ie={saveToStorage:Ue,loadFromStorage:Le,makeId:qe};function Ue(e,t){localStorage.setItem(e,JSON.stringify(t)||null)}function Le(e){let t=localStorage.getItem(e);return t?JSON.parse(t):void 0}function qe(e=8){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}const T="//localhost:3030/api/toy/",h={query:He,remove:Me,save:ze,getEmptyToy:je,getById:Re};function He(e){return $.get(T,{params:e}).then(t=>t.data)}function Re(e){return $.get(T+e).then(t=>t.data)}function Me(e){return $.delete(T+e)}function ze(e){return e._id?$.put(T+e._id,e):$.post(T,e)}function je(){return{_id:Ie.makeId(),name:"",type:"Educational",price:0,labels:["Doll","Battery Powered","Baby"],createdAt:Date.now(),inStock:!0,reviews:["I love this toy!","The best toy"]}}const Je={name:"toy-detail",data(){return{toy:null}},created(){const{id:e}=this.$route.params;h.getById(e).then(t=>{this.toy=t})},methods:{goBack(){this.$router.push("/toy")}},computed:{labels(){return console.log("this.toy.labels:",this.toy.labels),this.toy.labels.toString()},inStock(){return this.toy.inStock?"Yes":"No"}}},We={key:0,class:"toy-details"},Ye=s("span",{class:"fw-bold"},"ID:",-1),Ge=s("span",{class:"fw-bold"},"Name:",-1),Ke=s("span",{class:"fw-bold"},"Price:",-1),Qe=s("span",{class:"fw-bold"},"Categories:",-1),Xe=s("span",{class:"fw-bold"},"Added:",-1),Ze=s("span",{class:"fw-bold"},"In Stock:",-1);function et(e,t,r,a,o,n){return o.toy?(i(),d("section",We,[s("article",null,[s("p",null,[Ye,y(" "+f(o.toy._id),1)]),s("p",null,[Ge,y(" "+f(o.toy.name),1)]),s("p",null,[Ke,y(" "+f(e.$filters.currencyUSD(o.toy.price)),1)]),s("p",null,[Qe,y(" "+f(n.labels),1)]),s("p",null,[Xe,y(" "+f(e.$filters.timeFormat(o.toy.createdAt)),1)]),s("p",null,[Ze,y(" "+f(n.inStock),1)])]),s("button",{onClick:t[0]||(t[0]=(...l)=>n.goBack&&n.goBack(...l)),class:"btn btn-primary"},"go back")])):F("",!0)}var tt=m(Je,[["render",et]]);const ot={name:"toy-edit",data(){return{toyToEdit:null}},created(){const{id:e}=this.$route.params;e?h.getById(e).then(t=>{this.toyToEdit=t}):this.toyToEdit=h.getEmptyToy()},methods:{goBack(){this.$router.push("/toy")},saveToy(){console.log("this.toyToEdit:",this.toyToEdit),this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then(()=>{this.$router.push("/toy")})}}},st={key:0,class:"toy-edit"},nt={class:"form-control"},rt=s("label",{for:"name",class:"form-label"},"Toy Name",-1),lt={class:"form-control"},at=s("label",{for:"price",class:"form-label"},"Toy Price",-1),it={class:"btn-group"};function ct(e,t,r,a,o,n){return o.toyToEdit?(i(),d("section",st,[s("form",{onSubmit:t[4]||(t[4]=O((...l)=>n.saveToy&&n.saveToy(...l),["prevent"])),class:"form"},[s("div",nt,[rt,C(s("input",{required:"","onUpdate:modelValue":t[0]||(t[0]=l=>o.toyToEdit.name=l),id:"name",type:"text",class:"form-input",placeholder:"Enter your toy's name here"},null,512),[[E,o.toyToEdit.name]])]),s("div",lt,[at,C(s("input",{required:"","onUpdate:modelValue":t[1]||(t[1]=l=>o.toyToEdit.price=l),id:"price",type:"number",class:"form-input"},null,512),[[E,o.toyToEdit.price,void 0,{number:!0}]])]),s("div",it,[s("button",{onClick:t[2]||(t[2]=(...l)=>n.saveToy&&n.saveToy(...l)),class:"btn btn-info"},"save"),s("button",{onClick:t[3]||(t[3]=(...l)=>n.goBack&&n.goBack(...l)),class:"btn btn-danger-text"},"go back")])],32)])):F("",!0)}var ut=m(ot,[["render",ct]]);V.register(...N);const dt={name:"dashboard",components:{PieChart:I},data(){return{}}};function yt(e,t,r,a,o,n){const l=p("PieChart");return i(),g(l,{chartData:e.data},null,8,["chartData"])}var pt=m(dt,[["render",yt]]);const mt={name:"Home",data(){return{testData:{labels:["Adult","Funny","Educational"],datasets:[{data:[],backgroundColor:["#77CEFF","#0079AF","#123E6B"]}]}}},components:{PriceChart:pt},created(){var e=this.$store.getters.avgPrice;for(var t of Object.keys(e))this.testData.datasets[0].data.push(+e[t])}},ft={class:"dashboard-page"},_t=s("h1",null,"Dashboard",-1);function ht(e,t,r,a,o,n){const l=p("price-chart");return i(),d("section",ft,[_t,_(l,{data:o.testData},null,8,["data"])])}var vt=m(mt,[["render",ht]]);const bt=U({history:L(),linkActiveClass:"active",routes:[{path:"/",name:"home-page",component:ie},{path:"/toy",name:"toy-app",component:Ne},{path:"/toy/:id",name:"toy-details",component:tt},{path:"/toy/edit/:id?",name:"toy-edit",component:ut},{path:"/dashboard",name:"dashboard",component:vt}]});var gt={state:{toys:null,prices:null,filterBy:null,type:{adult:0,funny:0,educational:0}},getters:{toys(e){return e.toys},avgPrice(e){return e.prices}},mutations:{setToys(e,{toys:t}){e.toys=t},removeToy(e,{id:t}){console.log("id:",t);const r=e.toys.findIndex(a=>a.id===t);e.toys.splice(r,1)},saveToy(e,{toy:t}){const r=e.toys.findIndex(a=>a.id===t.id);r!==-1?e.toys.splice(r,1,t):e.toys.push(t)},setFilter(e,{filterBy:t}){e.filterBy=t},updateAvg(e){var t={sum:0,count:0},r={sum:0,count:0},a={sum:0,count:0};e.toys.forEach(o=>{o.type==="Adult"?(t.sum+=o.price,t.count++):o.type==="Funny"?(r.sum+=o.price,r.count++):o.type==="Educational"&&(a.sum+=o.price,a.count++)}),e.type.adult=(+t.sum/+t.count).toFixed(2),e.type.funny=(+r.sum/+r.count).toFixed(2),e.type.educational=(+a.sum/+a.count).toFixed(2)}},actions:{loadPrices({commit:e}){h.query().then(t=>{const r=t.map(a=>a.price);e({type:"setPrices",prices:r})})},loadToys({commit:e,state:t}){h.query(t.filterBy).then(r=>{e({type:"setToys",toys:r})}).then(()=>e({type:"updateAvg"}))},removeToy({commit:e},{id:t}){console.log("removing toy id:",t),h.remove(t).then(()=>{e({type:"removeToy",id:t})})},saveToy({commit:e},{toy:t}){h.save(t).then(r=>{e({type:"saveToy",toy:r})})},filter({commit:e,dispatch:t},{filterBy:r}){e({type:"setFilter",filterBy:r}),t({type:"loadToys"})}}};const $t=q({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:gt}}),Tt={mounted:e=>{e.focus()}};const b=H(oe);b.config.globalProperties.$filters={currencyUSD(e){return"$"+e},timeFormat(e){return new Date(e).toDateString()}};b.directive("focus",Tt);b.use(bt);b.use($t);b.use(R);b.mount("#app");
