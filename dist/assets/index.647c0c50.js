import{_,r as p,o as i,c as d,a as n,b as m,w as h,d as y,e as b,f as T,F as k,g as w,h as P,i as E,v as F,j as C,t as f,k as A,l as B,m as O,C as V,n as M,P as N,p as I,q as L,s as U,u as q,x as G,y as z}from"./vendor.dc825919.js";const H=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}};H();const R={},j={class:"main-header flex items-center justify-between"},J=n("div",{class:"logo uppercase"},[n("h1",null,"Mister Toy")],-1),Y={class:"flex gap-1"},W=y("Home"),X=y("Toy"),K=y("Dashboard"),Q=y("About");function Z(e,t){const r=p("router-link");return i(),d("header",j,[J,n("nav",Y,[m(r,{class:"link",to:"/"},{default:h(()=>[W]),_:1}),m(r,{class:"link",to:"/toy"},{default:h(()=>[X]),_:1}),m(r,{class:"link",to:"/dashboard"},{default:h(()=>[K]),_:1}),m(r,{class:"link",to:"/about"},{default:h(()=>[Q]),_:1})])])}var ee=_(R,[["render",Z]]);const te={name:"app",components:{appHeader:ee},created(){this.$store.dispatch({type:"loadToys"})}},oe={class:"app-container container"};function se(e,t,r,l,o,s){const a=p("app-header"),u=p("router-view");return i(),d("section",oe,[m(a),m(u)])}var ne=_(te,[["render",se]]);const re={name:"Home"},ae={class:"home-page"},le=n("h1",null,"Home page",-1),ie=[le];function ce(e,t,r,l,o,s){return i(),d("section",ae,ie)}var ue=_(re,[["render",ce]]);const de={name:"map",data(){return{center:{lat:31.715427,lng:35.09928},markers:[{position:{lat:31.714427,lng:35.17}},{position:{lat:31.716427,lng:35.2}},{position:{lat:31.715527,lng:35.15}},{position:{lat:31.713427,lng:35.13}}]}}};function pe(e,t,r,l,o,s){const a=p("GMapMarker"),u=p("GMapCluster"),$=p("GMapMap");return i(),b($,{center:o.center,zoom:13,"map-type-id":"terrain",style:{width:"500px",height:"700px"}},{default:h(()=>[m(u,null,{default:h(()=>[(i(!0),d(k,null,T(o.markers,(S,c)=>(i(),b(a,{key:c,position:S.position,clickable:!0,draggable:!0,onClick:D=>o.center=S.position},null,8,["position","onClick"]))),128))]),_:1})]),_:1},8,["center"])}var ye=_(de,[["render",pe]]);const me={name:"About",components:{shopMap:ye}},_e={class:"about-page"},fe=n("h1",null,"About page",-1);function he(e,t,r,l,o,s){const a=p("shop-map");return i(),d("section",_e,[fe,m(a)])}var ve=_(me,[["render",he]]);const be={name:"toy-filter",data(){return{filterBy:{name:"",inStock:w(!0),labels:w([]),sortBy:w("")},labelOptions:[{value:"On Wheels",label:"On Wheels"},{value:"Box Game",label:"Box Game"},{value:"Art",label:"Art"},{value:"Baby",label:"Baby"},{value:"Doll",label:"Doll"},{value:"Puzzle",label:"Puzzle"},{value:"Outdoor",label:"Outdoor"}],sortOptions:[{value:"name",label:"Name"},{value:"price",label:"Price"},{value:"created",label:"Created"}]}},methods:{setFilter(){console.log("this.filterBy:",this.filterBy),this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))}}},ge={class:"toy-filter"},$e=n("p",null,"Filter by:",-1),Te={class:"form-container"};function ke(e,t,r,l,o,s){const a=p("el-checkbox"),u=p("el-option"),$=p("el-select"),S=P("focus");return i(),d("section",ge,[$e,n("div",Te,[E(n("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>o.filterBy.name=c),onInput:t[1]||(t[1]=(...c)=>s.setFilter&&s.setFilter(...c)),type:"text",class:"form-input",placeholder:"Toy name"},null,544),[[S],[F,o.filterBy.name]]),n("span",null,[m(a,{class:"checkmark",modelValue:o.filterBy.inStock,"onUpdate:modelValue":t[2]||(t[2]=c=>o.filterBy.inStock=c),onChange:s.setFilter,label:"In Stock",size:"large"},null,8,["modelValue","onChange"])]),m($,{modelValue:o.filterBy.labels,"onUpdate:modelValue":t[3]||(t[3]=c=>o.filterBy.labels=c),onChange:s.setFilter,multiple:"",placeholder:"Label",style:{width:"240px"}},{default:h(()=>[(i(!0),d(k,null,T(o.labelOptions,c=>(i(),b(u,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),m($,{modelValue:e.value,"onUpdate:modelValue":t[5]||(t[5]=c=>e.value=c),placeholder:"Sort by"},{default:h(()=>[(i(!0),d(k,null,T(o.sortOptions,c=>(i(),b(u,{onChange:s.setFilter,modelValue:o.filterBy.sortBy,"onUpdate:modelValue":t[4]||(t[4]=D=>o.filterBy.sortBy=D),key:c.value,label:c.label,value:c.value,disabled:c.disabled},null,8,["onChange","modelValue","label","value","disabled"]))),128))]),_:1},8,["modelValue"])])}var Be=_(be,[["render",ke]]);const xe={},Se={class:"custom-card flex flex-col gap-1 items-center"};function we(e,t){return i(),d("article",Se,[n("header",null,[C(e.$slots,"header",{},void 0,!0)]),n("main",null,[C(e.$slots,"default",{},void 0,!0)]),n("footer",null,[C(e.$slots,"footer",{},void 0,!0)])])}var Ce=_(xe,[["render",we],["__scopeId","data-v-e49d6808"]]);const Ee={name:"toy-preview",props:{toy:Object},components:{customCard:Ce},methods:{goToDetail(){this.$router.push(`/toy/${this.toy._id}`)},goToEdit(){this.$router.push(`/toy/edit/${this.toy._id}`)},removeToy(e){console.log("removed toy:",e),this.$emit("removeToy",e)}},computed:{inStock(){return this.toy.inStock?"Yes":"No"}}},Fe={class:"toy-preview"},Ae=n("span",{class:"fw-bold"},"Name:",-1),De=n("span",{class:"fw-bold"},"Price:",-1),Pe=n("span",{class:"fw-bold"},"Labels:",-1),Oe=n("span",{class:"fw-bold"},"Created:",-1),Ve=n("span",{class:"fw-bold"},"In stock?",-1),Me={class:"btn-group"};function Ne(e,t,r,l,o,s){const a=p("custom-card");return i(),d("li",Fe,[m(a,null,{header:h(()=>[n("p",null,[Ae,y(" "+f(r.toy.name),1)]),n("p",null,[De,y(" "+f(e.$filters.currencyUSD(r.toy.price)),1)]),Pe,(i(!0),d(k,null,T(r.toy.labels,u=>(i(),d("p",{class:"flex",key:u},f(u),1))),128)),n("p",null,[Oe,y(" "+f(e.$filters.timeFormat(r.toy.createdAt)),1)]),n("p",null,[Ve,y(" "+f(s.inStock),1)])]),footer:h(()=>[n("div",Me,[n("button",{onClick:t[0]||(t[0]=(...u)=>s.goToEdit&&s.goToEdit(...u)),class:"btn btn-primary"},"edit"),n("button",{onClick:t[1]||(t[1]=(...u)=>s.goToDetail&&s.goToDetail(...u)),class:"btn btn-info"},"details"),n("button",{onClick:t[2]||(t[2]=u=>s.removeToy(r.toy._id)),class:"btn btn-danger"}," delete ")])]),_:1})])}var Ie=_(Ee,[["render",Ne]]);const Le={name:"toy-list",props:{toys:{type:Array,required:!0}},components:{toyPreview:Ie},created(){console.log(this.toys)},methods:{removeToy(e){this.$emit("removeToy",e)}}},Ue={class:"toy-list clean-list grid gap-3"};function qe(e,t,r,l,o,s){const a=p("toy-preview");return i(),d("ul",Ue,[(i(!0),d(k,null,T(r.toys,u=>(i(),b(a,{onRemoveToy:s.removeToy,toy:u,key:u._id},null,8,["onRemoveToy","toy"]))),128))])}var Ge=_(Le,[["render",qe]]);const ze={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys},toysToShow(){if(!this.filterBy)return this.toys;const e=new RegExp(this.filterBy.name,"i");return this.toys.filter(t=>e.test(t.name))}},created(){},methods:{setFilter(e){this.filterBy=e},removeToy(e){this.$store.dispatch({type:"removeToy",id:e})},goToEdit(){this.$router.push("/toy/edit/")}},components:{toyList:Ge,toyFilter:Be}},He={class:"toy-app"};function Re(e,t,r,l,o,s){const a=p("toy-filter"),u=p("toy-list");return i(),d("section",He,[m(a,{onSetFilter:s.setFilter},null,8,["onSetFilter"]),s.toys?(i(),b(u,{key:0,onRemoveToy:s.removeToy,toys:s.toysToShow},null,8,["onRemoveToy","toys"])):A("",!0),n("button",{onClick:t[0]||(t[0]=(...$)=>s.goToEdit&&s.goToEdit(...$)),class:"btn btn-secondary"},"Add a new toy")])}var je=_(ze,[["render",Re]]);const Je={saveToStorage:Ye,loadFromStorage:We,makeId:Xe};function Ye(e,t){localStorage.setItem(e,JSON.stringify(t)||null)}function We(e){let t=localStorage.getItem(e);return t?JSON.parse(t):void 0}function Xe(e=8){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=0;l<e;l++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}const x="//localhost:3030/api/toy/",v={query:Ke,remove:Ze,save:et,getEmptyToy:tt,getById:Qe};function Ke(e){return B.get(x,{params:e}).then(t=>t.data)}function Qe(e){return B.get(x+e).then(t=>t.data)}function Ze(e){return B.delete(x+e)}function et(e){return e._id?B.put(x+e._id,e):B.post(x,e)}function tt(){return{_id:Je.makeId(),name:"",type:"Educational",price:0,labels:["Doll","Battery Powered","Baby"],createdAt:Date.now(),inStock:!0,reviews:["I love this toy!","The best toy"]}}const ot={name:"toy-detail",data(){return{toy:null}},created(){const{id:e}=this.$route.params;v.getById(e).then(t=>{this.toy=t})},methods:{goBack(){this.$router.push("/toy")}},computed:{labels(){return console.log("this.toy.labels:",this.toy.labels),this.toy.labels.toString()},inStock(){return this.toy.inStock?"Yes":"No"}}},st={key:0,class:"toy-details"},nt=n("span",{class:"fw-bold"},"ID:",-1),rt=n("span",{class:"fw-bold"},"Name:",-1),at=n("span",{class:"fw-bold"},"Price:",-1),lt=n("span",{class:"fw-bold"},"Categories:",-1),it=n("span",{class:"fw-bold"},"Added:",-1),ct=n("span",{class:"fw-bold"},"In Stock:",-1);function ut(e,t,r,l,o,s){return o.toy?(i(),d("section",st,[n("article",null,[n("p",null,[nt,y(" "+f(o.toy._id),1)]),n("p",null,[rt,y(" "+f(o.toy.name),1)]),n("p",null,[at,y(" "+f(e.$filters.currencyUSD(o.toy.price)),1)]),n("p",null,[lt,y(" "+f(s.labels),1)]),n("p",null,[it,y(" "+f(e.$filters.timeFormat(o.toy.createdAt)),1)]),n("p",null,[ct,y(" "+f(s.inStock),1)])]),n("button",{onClick:t[0]||(t[0]=(...a)=>s.goBack&&s.goBack(...a)),class:"btn btn-primary"},"go back")])):A("",!0)}var dt=_(ot,[["render",ut]]);const pt={name:"toy-edit",data(){return{toyToEdit:null}},created(){const{id:e}=this.$route.params;e?v.getById(e).then(t=>{this.toyToEdit=t}):this.toyToEdit=v.getEmptyToy()},methods:{goBack(){this.$router.push("/toy")},saveToy(){console.log("this.toyToEdit:",this.toyToEdit),this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then(()=>{this.$router.push("/toy")})}}},yt={key:0,class:"toy-edit"},mt={class:"form-control"},_t=n("label",{for:"name",class:"form-label"},"Toy Name",-1),ft={class:"form-control"},ht=n("label",{for:"price",class:"form-label"},"Toy Price",-1),vt={class:"btn-group"};function bt(e,t,r,l,o,s){return o.toyToEdit?(i(),d("section",yt,[n("form",{onSubmit:t[4]||(t[4]=O((...a)=>s.saveToy&&s.saveToy(...a),["prevent"])),class:"form"},[n("div",mt,[_t,E(n("input",{required:"","onUpdate:modelValue":t[0]||(t[0]=a=>o.toyToEdit.name=a),id:"name",type:"text",class:"form-input",placeholder:"Enter your toy's name here"},null,512),[[F,o.toyToEdit.name]])]),n("div",ft,[ht,E(n("input",{required:"","onUpdate:modelValue":t[1]||(t[1]=a=>o.toyToEdit.price=a),id:"price",type:"number",class:"form-input"},null,512),[[F,o.toyToEdit.price,void 0,{number:!0}]])]),n("div",vt,[n("button",{onClick:t[2]||(t[2]=(...a)=>s.saveToy&&s.saveToy(...a)),class:"btn btn-info"},"save"),n("button",{onClick:t[3]||(t[3]=(...a)=>s.goBack&&s.goBack(...a)),class:"btn btn-danger-text"},"go back")])],32)])):A("",!0)}var gt=_(pt,[["render",bt]]);V.register(...M);const $t={name:"dashboard",components:{PieChart:N},data(){return{}}};function Tt(e,t,r,l,o,s){const a=p("PieChart");return i(),b(a,{chartData:e.data},null,8,["chartData"])}var kt=_($t,[["render",Tt]]);const Bt={name:"Home",data(){return{testData:{labels:["Adult","Funny","Educational"],datasets:[{data:[],backgroundColor:["#77CEFF","#0079AF","#123E6B"]}]}}},components:{PriceChart:kt},created(){var e=this.$store.getters.avgPrice;for(var t of Object.keys(e))this.testData.datasets[0].data.push(+e[t])}},xt={class:"dashboard-page"},St=n("h1",null,"Dashboard",-1);function wt(e,t,r,l,o,s){const a=p("price-chart");return i(),d("section",xt,[St,m(a,{data:o.testData},null,8,["data"])])}var Ct=_(Bt,[["render",wt]]);const Et=I({history:L(),linkActiveClass:"active",routes:[{path:"/",name:"home-page",component:ue},{path:"/toy",name:"toy-app",component:je},{path:"/toy/:id",name:"toy-details",component:dt},{path:"/toy/edit/:id?",name:"toy-edit",component:gt},{path:"/dashboard",name:"dashboard",component:Ct},{path:"/about",name:"about",component:ve}]});var Ft={state:{toys:null,prices:null,filterBy:null,type:{adult:0,funny:0,educational:0}},getters:{toys(e){return e.toys},avgPrice(e){return e.prices}},mutations:{setToys(e,{toys:t}){e.toys=t},removeToy(e,{id:t}){console.log("id:",t);const r=e.toys.findIndex(l=>l.id===t);e.toys.splice(r,1)},saveToy(e,{toy:t}){const r=e.toys.findIndex(l=>l.id===t.id);r!==-1?e.toys.splice(r,1,t):e.toys.push(t)},setFilter(e,{filterBy:t}){e.filterBy=t},updateAvg(e){var t={sum:0,count:0},r={sum:0,count:0},l={sum:0,count:0};e.toys.forEach(o=>{o.type==="Adult"?(t.sum+=o.price,t.count++):o.type==="Funny"?(r.sum+=o.price,r.count++):o.type==="Educational"&&(l.sum+=o.price,l.count++)}),e.type.adult=(+t.sum/+t.count).toFixed(2),e.type.funny=(+r.sum/+r.count).toFixed(2),e.type.educational=(+l.sum/+l.count).toFixed(2)}},actions:{loadPrices({commit:e}){v.query().then(t=>{const r=t.map(l=>l.price);e({type:"setPrices",prices:r})})},loadToys({commit:e,state:t}){v.query(t.filterBy).then(r=>{e({type:"setToys",toys:r})}).then(()=>e({type:"updateAvg"}))},removeToy({commit:e},{id:t}){console.log("removing toy id:",t),v.remove(t).then(()=>{e({type:"removeToy",id:t})})},saveToy({commit:e},{toy:t}){v.save(t).then(r=>{e({type:"saveToy",toy:r})})},filter({commit:e,dispatch:t},{filterBy:r}){e({type:"setFilter",filterBy:r}),t({type:"loadToys"})}}};const At=U({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:Ft}}),Dt={mounted:e=>{e.focus()}};const g=q(ne);g.config.globalProperties.$filters={currencyUSD(e){return"$"+e},timeFormat(e){return new Date(e).toDateString()}};g.directive("focus",Dt);g.use(Et);g.use(At);g.use(G);g.use(z,{load:{key:"AIzaSyDXNxZYGzQXRBraA5rsPqLrOhvqO8pHxA8"}});g.mount("#app");
