import{r as m,o as d,c as y,a as o,b as f,w as v,d as a,e as F,f as _,v as B,g as C,h as k,i as E,j as $,t as u,F as D,k as I,l as w,m as S,n as b,p as N,q as A,s as V,u as O,x as P}from"./vendor.cafdb1eb.js";const U=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}};U();var p=(t,e)=>{const i=t.__vccOpts||t;for(const[c,n]of e)i[c]=n;return i};const L={},R={class:"main-header flex items-center justify-between"},q=o("div",{class:"logo uppercase"},[o("h1",null,"Mister Toy")],-1),H={class:"flex gap-1"},M=a("Home"),z=a("Toy");function j(t,e){const i=m("router-link");return d(),y("header",R,[q,o("nav",H,[f(i,{class:"link",to:"/"},{default:v(()=>[M]),_:1}),f(i,{class:"link",to:"/toy"},{default:v(()=>[z]),_:1})])])}var Y=p(L,[["render",j]]);const J={name:"app",components:{appHeader:Y},created(){this.$store.dispatch({type:"loadToys"})}},W={class:"app-container container"};function G(t,e,i,c,n,s){const l=m("app-header"),r=m("router-view");return d(),y("section",W,[f(l),f(r)])}var K=p(J,[["render",G]]);const Q={name:"Home",data(){return{}}},X={class:"home-page"},Z=o("h1",null,"Home page",-1),ee=[Z];function te(t,e,i,c,n,s){return d(),y("section",X,ee)}var oe=p(Q,[["render",te]]);const se={name:"toy-filter",data(){return{filterBy:{name:"",inStock:!0,labels:[],sortBy:"name"}}},methods:{setFilter(){this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))},toggleInStock(){this.filterBy.inStock=!this.filterBy.inStock}}},ne={class:"toy-filter"},re=o("label",{for:"stock"},"In Stock",-1),ie=o("p",{for:"labels"},"Choose a category:",-1),le=E('<option value="on wheels">On Wheels</option><option value="box game">Box Game</option><option value="art">Art</option><option value="baby">Baby</option><option value="doll">Doll</option><option value="puzzle">Puzzle</option><option value="outdoor">Outdoor</option>',7),ae=[le],ce={class:"sort-container"},de=a(" Name"),ue=a(" | "),ye=a(" Price"),pe=a(" | "),me=a(" Created");function _e(t,e,i,c,n,s){const l=F("focus");return d(),y("section",ne,[_(o("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>n.filterBy.name=r),onInput:e[1]||(e[1]=(...r)=>s.setFilter&&s.setFilter(...r)),type:"text",class:"form-input",placeholder:"Search toy name"},null,544),[[l],[B,n.filterBy.name]]),o("input",{class:"checkmark",type:"checkbox",id:"stock",onChange:e[2]||(e[2]=(...r)=>s.toggleInStock&&s.toggleInStock(...r)),checked:"checked"},null,32),re,ie,_(o("select",{class:"select",name:"labels",id:"labels",onChange:e[3]||(e[3]=(...r)=>s.setFilter&&s.setFilter(...r)),"onUpdate:modelValue":e[4]||(e[4]=r=>n.filterBy.labels=r),multiple:""},ae,544),[[C,n.filterBy.labels]]),o("div",ce,[o("label",null,[_(o("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=r=>n.filterBy.sortBy=r),onChange:e[6]||(e[6]=(...r)=>s.setFilter&&s.setFilter(...r)),value:"name",hidden:""},null,544),[[k,n.filterBy.sortBy]]),de]),ue,o("label",null,[_(o("input",{type:"radio","onUpdate:modelValue":e[7]||(e[7]=r=>n.filterBy.sortBy=r),onChange:e[8]||(e[8]=(...r)=>s.setFilter&&s.setFilter(...r)),hidden:""},null,544),[[k,n.filterBy.sortBy,void 0,{number:!0}]]),ye]),pe,o("label",null,[_(o("input",{type:"radio","onUpdate:modelValue":e[9]||(e[9]=r=>n.filterBy.sortBy=r),onChange:e[10]||(e[10]=(...r)=>s.setFilter&&s.setFilter(...r)),hidden:""},null,544),[[k,n.filterBy.sortBy,void 0,{number:!0}]]),me])])])}var fe=p(se,[["render",_e]]);const he={},ve={class:"custom-card flex flex-col gap-1 items-center"};function be(t,e){return d(),y("article",ve,[o("header",null,[$(t.$slots,"header",{},void 0,!0)]),o("main",null,[$(t.$slots,"default",{},void 0,!0)]),o("footer",null,[$(t.$slots,"footer",{},void 0,!0)])])}var ge=p(he,[["render",be],["__scopeId","data-v-e49d6808"]]);const Te={name:"toy-preview",props:{toy:Object},components:{customCard:ge},methods:{goToDetail(){this.$router.push(`/toy/${this.toy.id}`)},goToEdit(){this.$router.push(`/toy/edit/${this.toy.id}`)},removeToy(t){this.$emit("removeToy",t)}},computed:{labels(){return this.toy.labels.toString()},inStock(){return this.toy.inStock?"Yes":"No"}}},ke={class:"toy-preview"},$e=o("span",{class:"fw-bold"},"Name:",-1),Be=o("span",{class:"fw-bold"},"Price:",-1),Se=o("span",{class:"fw-bold"},"Labels:",-1),we=o("span",{class:"fw-bold"},"Created:",-1),xe=o("span",{class:"fw-bold"},"In stock?",-1),Fe={class:"btn-group"};function Ce(t,e,i,c,n,s){const l=m("custom-card");return d(),y("li",ke,[f(l,null,{header:v(()=>[o("p",null,[$e,a(" "+u(i.toy.name),1)]),o("p",null,[Be,a(" "+u(t.$filters.currencyUSD(i.toy.price)),1)]),o("p",null,[Se,a(" "+u(s.labels),1)]),o("p",null,[we,a(" "+u(t.$filters.timeFormat(i.toy.createdAt)),1)]),o("p",null,[xe,a(" "+u(s.inStock),1)])]),footer:v(()=>[o("div",Fe,[o("button",{onClick:e[0]||(e[0]=(...r)=>s.goToEdit&&s.goToEdit(...r)),class:"btn btn-primary"},"edit"),o("button",{onClick:e[1]||(e[1]=(...r)=>s.goToDetail&&s.goToDetail(...r)),class:"btn btn-info"},"details"),o("button",{onClick:e[2]||(e[2]=r=>s.removeToy(i.toy._id)),class:"btn btn-danger"}," delete ")])]),_:1})])}var Ee=p(Te,[["render",Ce]]);const De={name:"toy-list",props:{toys:{type:Array,required:!0}},components:{toyPreview:Ee},created(){console.log(this.toys)},methods:{removeToy(t){this.$emit("removeToy",t)}}},Ie={class:"toy-list clean-list grid gap-3"};function Ne(t,e,i,c,n,s){const l=m("toy-preview");return d(),y("ul",Ie,[(d(!0),y(D,null,I(i.toys,r=>(d(),w(l,{onRemoveToy:s.removeToy,toy:r,key:r._id},null,8,["onRemoveToy","toy"]))),128))])}var Ae=p(De,[["render",Ne]]);const Ve={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys},toysToShow(){if(!this.filterBy)return this.toys;const t=new RegExp(this.filterBy.name,"i");return this.toys.filter(e=>t.test(e.name))}},created(){},methods:{setFilter(t){this.filterBy=t},goToEdit(){this.$router.push("/toy/edit")},removeToy(t){this.$store.dispatch({type:"removeToy",id:t})}},components:{toyList:Ae,toyFilter:fe}},Oe={class:"toy-app"},Pe=a("Add a new toy");function Ue(t,e,i,c,n,s){const l=m("toy-filter"),r=m("toy-list"),x=m("router-link");return d(),y("section",Oe,[f(l,{onSetFilter:s.setFilter},null,8,["onSetFilter"]),s.toys?(d(),w(r,{key:0,onRemoveToy:s.removeToy,toys:s.toysToShow},null,8,["onRemoveToy","toys"])):S("",!0),f(x,{to:"/toy/edit",class:"btn btn-secondary"},{default:v(()=>[Pe]),_:1})])}var Le=p(Ve,[["render",Ue]]);const g="//localhost:3030/api/toy/",h={query:Re,remove:He,save:Me,getEmptyToy:ze,getById:qe};function Re(t){return b.get(g,{params:t}).then(e=>e.data)}function qe(t){return b.get(g+t).then(e=>e.data)}function He(t){return b.delete(g+t)}function Me(t){return t._id?b.put(g+t._id,t):b.post(g,t)}function ze(){return{_id:"",name:"",price:0,labels:["Doll","Battery Powered","Baby"],createdAt:Date.now(),inStock:!0,reviews:["I love this toy!","The best toy"]}}const je={name:"toy-detail",data(){return{toy:null}},created(){const{id:t}=this.$route.params;h.getById(t).then(e=>{this.toy=e})},methods:{goBack(){this.$router.push("/toy")}},computed:{labels(){return this.toy.labels.toString()},inStock(){return this.toy.inStock?"Yes":"No"}}},Ye={key:0,class:"toy-details"},Je=o("span",{class:"fw-bold"},"ID:",-1),We=o("span",{class:"fw-bold"},"Name:",-1),Ge=o("span",{class:"fw-bold"},"Price:",-1),Ke=o("span",{class:"fw-bold"},"Categories:",-1),Qe=o("span",{class:"fw-bold"},"Added:",-1),Xe=o("span",{class:"fw-bold"},"In stock?",-1);function Ze(t,e,i,c,n,s){return n.toy?(d(),y("section",Ye,[o("article",null,[o("p",null,[Je,a(" "+u(n.toy._id),1)]),o("p",null,[We,a(" "+u(n.toy.name),1)]),o("p",null,[Ge,a(" "+u(t.$filters.currencyUSD(n.toy.price)),1)]),o("p",null,[Ke,a(" "+u(s.labels),1)]),o("p",null,[Qe,a(" "+u(t.$filters.timeFormat(n.toy.createdAt)),1)]),o("p",null,[Xe,a(" "+u(s.inStock),1)])]),o("button",{onClick:e[0]||(e[0]=(...l)=>s.goBack&&s.goBack(...l)),class:"btn btn-primary"},"go back")])):S("",!0)}var et=p(je,[["render",Ze]]);const tt={name:"toy-edit",data(){return{toyToEdit:null}},created(){const{id:t}=this.$route.params;t?h.getById(t).then(e=>{this.toyToEdit=e}):this.toyToEdit=h.getEmptyToy()},methods:{goBack(){this.$router.push("/toy")},saveToy(){this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then(()=>{this.$router.push("/toy")})}}},ot={key:0,class:"toy-edit"},st={class:"form-control"},nt=o("label",{for:"name",class:"form-label"},"Toy Name",-1),rt={class:"form-control"},it=o("label",{for:"price",class:"form-label"},"Toy Price",-1),lt={class:"btn-group"};function at(t,e,i,c,n,s){return n.toyToEdit?(d(),y("section",ot,[o("form",{onSubmit:e[4]||(e[4]=N((...l)=>s.saveToy&&s.saveToy(...l),["prevent"])),class:"form"},[o("div",st,[nt,_(o("input",{required:"","onUpdate:modelValue":e[0]||(e[0]=l=>n.toyToEdit.name=l),id:"name",type:"text",class:"form-input",placeholder:"Enter your toy's name here"},null,512),[[B,n.toyToEdit.name]])]),o("div",rt,[it,_(o("input",{required:"","onUpdate:modelValue":e[1]||(e[1]=l=>n.toyToEdit.price=l),id:"price",type:"number",class:"form-input"},null,512),[[B,n.toyToEdit.price,void 0,{number:!0}]])]),o("div",lt,[o("button",{onClick:e[2]||(e[2]=(...l)=>s.saveToy&&s.saveToy(...l)),class:"btn btn-info"},"save"),o("button",{onClick:e[3]||(e[3]=(...l)=>s.goBack&&s.goBack(...l)),class:"btn btn-danger-text"},"go back")])],32)])):S("",!0)}var ct=p(tt,[["render",at]]);const dt=A({history:V(),linkActiveClass:"active",routes:[{path:"/",name:"home-page",component:oe},{path:"/toy",name:"toy-app",component:Le},{path:"/toy/:id",name:"toy-details",component:et},{path:"/toy/edit/:id?",name:"toy-edit",component:ct}]});var ut={state:{toys:null,filterBy:null},getters:{toys(t){return t.toys}},mutations:{setToys(t,{toys:e}){t.toys=e},removeToy(t,{id:e}){console.log("id:",e);const i=t.toys.findIndex(c=>c.id===e);t.toys.splice(i,1)},saveToy(t,{toy:e}){const i=t.toys.findIndex(c=>c.id===e.id);i!==-1?t.toys.splice(i,1,e):t.toys.push(e)},setFilter(t,{filterBy:e}){t.filterBy=e}},actions:{loadToys({commit:t}){h.query().then(e=>{t({type:"setToys",toys:e})})},removeToy({commit:t},{id:e}){h.remove(e).then(()=>{t({type:"removeToy",id:e})})},saveToy({commit:t},{toy:e}){h.save(e).then(i=>{t({type:"saveToy",toy:i})})},filter({commit:t,dispatch:e},{filterBy:i}){t({type:"setFilter",filterBy:i}),e({type:"loadToys"})}}};const yt=O({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:ut}}),pt={mounted:t=>{t.focus()}};const T=P(K);T.config.globalProperties.$filters={currencyUSD(t){return"$"+t},timeFormat(t){return new Date(t).toDateString()}};T.directive("focus",pt);T.use(dt);T.use(yt);T.mount("#app");
