import{r as m,o as d,c as u,a as o,b as _,w as v,d as c,e as E,f,v as B,g as I,h as k,i as N,j as $,t as y,F as w,k as x,l as F,m as S,n as g,p as D,q as A,s as O,u as V,x as P}from"./vendor.cafdb1eb.js";const U=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}};U();var p=(t,e)=>{const i=t.__vccOpts||t;for(const[a,n]of e)i[a]=n;return i};const L={},M={class:"main-header flex items-center justify-between"},R=o("div",{class:"logo uppercase"},[o("h1",null,"Mister Toy")],-1),q={class:"flex gap-1"},H=c("Home"),z=c("Toy");function J(t,e){const i=m("router-link");return d(),u("header",M,[R,o("nav",q,[_(i,{class:"link",to:"/"},{default:v(()=>[H]),_:1}),_(i,{class:"link",to:"/toy"},{default:v(()=>[z]),_:1})])])}var j=p(L,[["render",J]]);const Y={name:"app",components:{appHeader:j},created(){this.$store.dispatch({type:"loadToys"})}},W={class:"app-container container"};function G(t,e,i,a,n,s){const l=m("app-header"),r=m("router-view");return d(),u("section",W,[_(l),_(r)])}var K=p(Y,[["render",G]]);const Q={name:"Home",data(){return{}}},X={class:"home-page"},Z=o("h1",null,"Home page",-1),ee=[Z];function te(t,e,i,a,n,s){return d(),u("section",X,ee)}var oe=p(Q,[["render",te]]);const se={name:"toy-filter",data(){return{filterBy:{name:"",inStock:!0,labels:[],sortBy:"name"}}},methods:{setFilter(){this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))},toggleInStock(){this.filterBy.inStock=!this.filterBy.inStock}}},ne={class:"toy-filter"},re=o("label",{for:"stock"},"In Stock",-1),ie=o("p",{for:"labels"},"Choose a category:",-1),le=N('<option value="on wheels">On Wheels</option><option value="box game">Box Game</option><option value="art">Art</option><option value="baby">Baby</option><option value="doll">Doll</option><option value="puzzle">Puzzle</option><option value="outdoor">Outdoor</option>',7),ae=[le],ce={class:"sort-container"},de=c(" Name"),ue=c(" | "),ye=c(" Price"),pe=c(" | "),me=c(" Created");function fe(t,e,i,a,n,s){const l=E("focus");return d(),u("section",ne,[f(o("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>n.filterBy.name=r),onInput:e[1]||(e[1]=(...r)=>s.setFilter&&s.setFilter(...r)),type:"text",class:"form-input",placeholder:"Search toy name"},null,544),[[l],[B,n.filterBy.name]]),o("input",{class:"checkmark",type:"checkbox",id:"stock",onChange:e[2]||(e[2]=(...r)=>s.toggleInStock&&s.toggleInStock(...r)),checked:"checked"},null,32),re,ie,f(o("select",{class:"select",name:"labels",id:"labels",onChange:e[3]||(e[3]=(...r)=>s.setFilter&&s.setFilter(...r)),"onUpdate:modelValue":e[4]||(e[4]=r=>n.filterBy.labels=r),multiple:""},ae,544),[[I,n.filterBy.labels]]),o("div",ce,[o("label",null,[f(o("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=r=>n.filterBy.sortBy=r),onChange:e[6]||(e[6]=(...r)=>s.setFilter&&s.setFilter(...r)),value:"name",hidden:""},null,544),[[k,n.filterBy.sortBy]]),de]),ue,o("label",null,[f(o("input",{type:"radio","onUpdate:modelValue":e[7]||(e[7]=r=>n.filterBy.sortBy=r),onChange:e[8]||(e[8]=(...r)=>s.setFilter&&s.setFilter(...r)),hidden:""},null,544),[[k,n.filterBy.sortBy,void 0,{number:!0}]]),ye]),pe,o("label",null,[f(o("input",{type:"radio","onUpdate:modelValue":e[9]||(e[9]=r=>n.filterBy.sortBy=r),onChange:e[10]||(e[10]=(...r)=>s.setFilter&&s.setFilter(...r)),hidden:""},null,544),[[k,n.filterBy.sortBy,void 0,{number:!0}]]),me])])])}var _e=p(se,[["render",fe]]);const he={},ve={class:"custom-card flex flex-col gap-1 items-center"};function ge(t,e){return d(),u("article",ve,[o("header",null,[$(t.$slots,"header",{},void 0,!0)]),o("main",null,[$(t.$slots,"default",{},void 0,!0)]),o("footer",null,[$(t.$slots,"footer",{},void 0,!0)])])}var be=p(he,[["render",ge],["__scopeId","data-v-e49d6808"]]);const Te={name:"toy-preview",props:{toy:Object},components:{customCard:be},methods:{goToDetail(){this.$router.push(`/toy/${this.toy._id}`)},goToEdit(){this.$router.push(`/toy/edit/${this.toy._id}`)},removeToy(t){console.log("removed toy:",t),this.$emit("removeToy",t)}},computed:{inStock(){return this.toy.inStock?"Yes":"No"}}},ke={class:"toy-preview"},$e=o("span",{class:"fw-bold"},"Name:",-1),Be=o("span",{class:"fw-bold"},"Price:",-1),Se=o("span",{class:"fw-bold"},"Labels:",-1),we=o("span",{class:"fw-bold"},"Created:",-1),xe=o("span",{class:"fw-bold"},"In stock?",-1),Fe={class:"btn-group"};function Ce(t,e,i,a,n,s){const l=m("custom-card");return d(),u("li",ke,[_(l,null,{header:v(()=>[o("p",null,[$e,c(" "+y(i.toy.name),1)]),o("p",null,[Be,c(" "+y(t.$filters.currencyUSD(i.toy.price)),1)]),Se,(d(!0),u(w,null,x(i.toy.labels,r=>(d(),u("p",{class:"flex",key:r},y(r),1))),128)),o("p",null,[we,c(" "+y(t.$filters.timeFormat(i.toy.createdAt)),1)]),o("p",null,[xe,c(" "+y(s.inStock),1)])]),footer:v(()=>[o("div",Fe,[o("button",{onClick:e[0]||(e[0]=(...r)=>s.goToEdit&&s.goToEdit(...r)),class:"btn btn-primary"},"edit"),o("button",{onClick:e[1]||(e[1]=(...r)=>s.goToDetail&&s.goToDetail(...r)),class:"btn btn-info"},"details"),o("button",{onClick:e[2]||(e[2]=r=>s.removeToy(i.toy._id)),class:"btn btn-danger"}," delete ")])]),_:1})])}var Ee=p(Te,[["render",Ce]]);const Ie={name:"toy-list",props:{toys:{type:Array,required:!0}},components:{toyPreview:Ee},created(){console.log(this.toys)},methods:{removeToy(t){this.$emit("removeToy",t)}}},Ne={class:"toy-list clean-list grid gap-3"};function De(t,e,i,a,n,s){const l=m("toy-preview");return d(),u("ul",Ne,[(d(!0),u(w,null,x(i.toys,r=>(d(),F(l,{onRemoveToy:s.removeToy,toy:r,key:r._id},null,8,["onRemoveToy","toy"]))),128))])}var Ae=p(Ie,[["render",De]]);const Oe={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys},toysToShow(){if(!this.filterBy)return this.toys;const t=new RegExp(this.filterBy.name,"i");return this.toys.filter(e=>t.test(e.name))}},created(){},methods:{setFilter(t){this.filterBy=t},removeToy(t){this.$store.dispatch({type:"removeToy",id:t})}},components:{toyList:Ae,toyFilter:_e}},Ve={class:"toy-app"},Pe=c("Add a new toy");function Ue(t,e,i,a,n,s){const l=m("toy-filter"),r=m("toy-list"),C=m("router-link");return d(),u("section",Ve,[_(l,{onSetFilter:s.setFilter},null,8,["onSetFilter"]),s.toys?(d(),F(r,{key:0,onRemoveToy:s.removeToy,toys:s.toysToShow},null,8,["onRemoveToy","toys"])):S("",!0),_(C,{to:"/toy/edit",class:"btn btn-secondary"},{default:v(()=>[Pe]),_:1})])}var Le=p(Oe,[["render",Ue]]);const Me={saveToStorage:Re,loadFromStorage:qe,makeId:He};function Re(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function qe(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function He(t=8){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<t;a++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}const b="//localhost:3030/api/toy/",h={query:ze,remove:je,save:Ye,getEmptyToy:We,getById:Je};function ze(t){return g.get(b,{params:t}).then(e=>e.data)}function Je(t){return g.get(b+t).then(e=>e.data)}function je(t){return g.delete(b+t)}function Ye(t){return t._id?g.put(b+t._id,t):g.post(b,t)}function We(){return{_id:Me.makeId(),name:"",price:0,labels:["Doll","Battery Powered","Baby"],createdAt:Date.now(),inStock:!0,reviews:["I love this toy!","The best toy"]}}const Ge={name:"toy-detail",data(){return{toy:null}},created(){const{id:t}=this.$route.params;h.getById(t).then(e=>{this.toy=e})},methods:{goBack(){this.$router.push("/toy")}},computed:{labels(){return console.log("this.toy.labels:",this.toy.labels),this.toy.labels.toString()},inStock(){return this.toy.inStock?"Yes":"No"}}},Ke={key:0,class:"toy-details"},Qe=o("span",{class:"fw-bold"},"ID:",-1),Xe=o("span",{class:"fw-bold"},"Name:",-1),Ze=o("span",{class:"fw-bold"},"Price:",-1),et=o("span",{class:"fw-bold"},"Categories:",-1),tt=o("span",{class:"fw-bold"},"Added:",-1),ot=o("span",{class:"fw-bold"},"In stock?",-1);function st(t,e,i,a,n,s){return n.toy?(d(),u("section",Ke,[o("article",null,[o("p",null,[Qe,c(" "+y(n.toy._id),1)]),o("p",null,[Xe,c(" "+y(n.toy.name),1)]),o("p",null,[Ze,c(" "+y(t.$filters.currencyUSD(n.toy.price)),1)]),o("p",null,[et,c(" "+y(s.labels),1)]),o("p",null,[tt,c(" "+y(t.$filters.timeFormat(n.toy.createdAt)),1)]),o("p",null,[ot,c(" "+y(s.inStock),1)])]),o("button",{onClick:e[0]||(e[0]=(...l)=>s.goBack&&s.goBack(...l)),class:"btn btn-primary"},"go back")])):S("",!0)}var nt=p(Ge,[["render",st]]);const rt={name:"toy-edit",data(){return{toyToEdit:null}},created(){const{id:t}=this.$route.params;t?h.getById(t).then(e=>{this.toyToEdit=e}):this.toyToEdit=h.getEmptyToy()},methods:{goBack(){this.$router.push("/toy")},saveToy(){console.log("this.toyToEdit:",this.toyToEdit),this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then(()=>{this.$router.push("/toy")})}}},it={key:0,class:"toy-edit"},lt={class:"form-control"},at=o("label",{for:"name",class:"form-label"},"Toy Name",-1),ct={class:"form-control"},dt=o("label",{for:"price",class:"form-label"},"Toy Price",-1),ut={class:"btn-group"};function yt(t,e,i,a,n,s){return n.toyToEdit?(d(),u("section",it,[o("form",{onSubmit:e[4]||(e[4]=D((...l)=>s.saveToy&&s.saveToy(...l),["prevent"])),class:"form"},[o("div",lt,[at,f(o("input",{required:"","onUpdate:modelValue":e[0]||(e[0]=l=>n.toyToEdit.name=l),id:"name",type:"text",class:"form-input",placeholder:"Enter your toy's name here"},null,512),[[B,n.toyToEdit.name]])]),o("div",ct,[dt,f(o("input",{required:"","onUpdate:modelValue":e[1]||(e[1]=l=>n.toyToEdit.price=l),id:"price",type:"number",class:"form-input"},null,512),[[B,n.toyToEdit.price,void 0,{number:!0}]])]),o("div",ut,[o("button",{onClick:e[2]||(e[2]=(...l)=>s.saveToy&&s.saveToy(...l)),class:"btn btn-info"},"save"),o("button",{onClick:e[3]||(e[3]=(...l)=>s.goBack&&s.goBack(...l)),class:"btn btn-danger-text"},"go back")])],32)])):S("",!0)}var pt=p(rt,[["render",yt]]);const mt=A({history:O(),linkActiveClass:"active",routes:[{path:"/",name:"home-page",component:oe},{path:"/toy",name:"toy-app",component:Le},{path:"/toy/:id",name:"toy-details",component:nt},{path:"/toy/edit/:id?",name:"toy-edit",component:pt}]});var ft={state:{toys:null,filterBy:null},getters:{toys(t){return t.toys}},mutations:{setToys(t,{toys:e}){t.toys=e},removeToy(t,{id:e}){console.log("id:",e);const i=t.toys.findIndex(a=>a.id===e);t.toys.splice(i,1)},saveToy(t,{toy:e}){const i=t.toys.findIndex(a=>a.id===e.id);i!==-1?t.toys.splice(i,1,e):t.toys.push(e)},setFilter(t,{filterBy:e}){t.filterBy=e}},actions:{loadToys({commit:t}){h.query().then(e=>{t({type:"setToys",toys:e})})},removeToy({commit:t},{id:e}){console.log("removing toy id:",e),h.remove(e).then(()=>{t({type:"removeToy",id:e})})},saveToy({commit:t},{toy:e}){h.save(e).then(i=>{t({type:"saveToy",toy:i})})},filter({commit:t,dispatch:e},{filterBy:i}){t({type:"setFilter",filterBy:i}),e({type:"loadToys"})}}};const _t=V({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:ft}}),ht={mounted:t=>{t.focus()}};const T=P(K);T.config.globalProperties.$filters={currencyUSD(t){return"$"+t},timeFormat(t){return new Date(t).toDateString()}};T.directive("focus",ht);T.use(mt);T.use(_t);T.mount("#app");
