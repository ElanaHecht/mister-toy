import{r as f,o as d,c as y,a as o,b as v,w as k,d as c,e as D,f as h,v as B,g as $,h as A,i as w,t as u,F as E,j as N,k as I,l as x,m as P,n as O,p as V,q,s as M}from"./vendor.5f33d348.js";const z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};z();var p=(t,e)=>{const r=t.__vccOpts||t;for(const[l,n]of e)r[l]=n;return r};const R={},U={class:"main-header flex items-center justify-between"},L=o("div",{class:"logo uppercase"},[o("h1",null,"Mister Toy")],-1),H={class:"flex gap-1"},J=c("Home"),j=c("Toy");function W(t,e){const r=f("router-link");return d(),y("header",U,[L,o("nav",H,[v(r,{class:"link",to:"/"},{default:k(()=>[J]),_:1}),v(r,{class:"link",to:"/toy"},{default:k(()=>[j]),_:1})])])}var Y=p(R,[["render",W]]);const G={name:"app",components:{appHeader:Y},created(){this.$store.dispatch({type:"loadToys"})}},K={class:"app-container container"};function Q(t,e,r,l,n,s){const a=f("app-header"),i=f("router-view");return d(),y("section",K,[v(a),v(i)])}var X=p(G,[["render",Q]]);const Z={name:"Home",data(){return{}}},ee={class:"home-page"},te=o("h1",null,"Home page",-1),oe=[te];function se(t,e,r,l,n,s){return d(),y("section",ee,oe)}var re=p(Z,[["render",se]]);const b={query:g,get:ne,post:ie,put:ae,remove:ce,postMany:le};function g(t){var e=JSON.parse(localStorage.getItem(t))||[];return Promise.resolve(e)}function ne(t,e){return g(t).then(r=>r.find(l=>l._id===e))}function ie(t,e){return e._id=de(),g(t).then(r=>(r.push(e),S(t,r),e))}function le(t,e){return g(t).then(r=>(r.push(...e),S(t,r),r))}function ae(t,e){return g(t).then(r=>{const l=r.findIndex(n=>n._id===e._id);return r.splice(l,1,e),S(t,r),e})}function ce(t,e){return g(t).then(r=>{const l=r.findIndex(n=>n._id===e);r.splice(l,1),S(t,r)})}function S(t,e){localStorage.setItem(t,JSON.stringify(e))}function de(t=8){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=0;l<t;l++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}const F={saveToStorage:ue,loadFromStorage:ye,makeId:pe};function ue(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function ye(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function pe(t=8){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=0;l<t;l++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}const _="toys_db";ge();const m={query:me,getById:fe,remove:_e,save:he,getEmptyToy:ve};function me(){return b.query(_)}function fe(t){const e=b.get(_,t),r="I bought this toy and it is amazing!";return e.reviews.push(r)}function _e(t){return b.remove(_,t)}function he(t){return t._id?b.put(_,t):b.post(_,t)}function ve(){return{name:"",price:0,labels:[],createdAt:Date.now(),inStock:!0,reviews:["I love this toy!"]}}function ge(){let t=F.loadFromStorage(_);return(!t||!t.length)&&(t=[{_id:"t101",name:"Talking Doll",price:123,labels:["Doll","Battery Powered","Baby"],createdAt:1631031801011,inStock:!0,reviews:["This is a terrible toy. Do not buy!"]},{_id:"t102",name:"Remote Robot",price:98,labels:["Doll","Battery Powered","Outdoor"],createdAt:1631031701011,inStock:!0,reviews:["This is an awesome toy. Buy it now!"]},{_id:"t103",name:"Hot Wheels",price:105,labels:["On wheels","Battery Powered","Outdoor"],createdAt:1631031601011,inStock:!0,reviews:["This is a terrible toy. Do not buy!"]},{_id:"t104",name:"Van Gogh Puzzle",price:145,labels:["Art","Puzzle","Box game"],createdAt:1631031501011,inStock:!0,reviews:["This is an awesome toy. Buy it now!"]}],F.saveToStorage(_,t)),t}const be={name:"toy-filter",data(){return{filterBy:{name:"",inStock:!0,label:"on wheels",sortBy:"name"}}},methods:{setFilter(){this.$emit("setFilter",this.filterBy)},toggleInStock(){this.filterBy.inStock=!this.filterBy.inStock}}},Te={class:"toy-filter"},ke=o("label",{for:"stock"},"In Stock",-1),Se=o("p",{for:"labels"},"Choose a category:",-1),$e=A('<option value="on wheels">On Wheels</option><option value="box game">Box Game</option><option value="art">Art</option><option value="baby">Baby</option><option value="doll">Doll</option><option value="puzzle">Puzzle</option><option value="outdoor">Outdoor</option>',7),we=[$e],Be={class:"sort-container"},xe=c(" Name"),Fe=c(" | "),Ie=c(" Price"),Ce=c(" | "),De=c(" Created");function Ae(t,e,r,l,n,s){const a=D("focus");return d(),y("section",Te,[h(o("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>n.filterBy.name=i),onInput:e[1]||(e[1]=(...i)=>s.setFilter&&s.setFilter(...i)),type:"text",class:"form-input",placeholder:"Search toy name"},null,544),[[a],[B,n.filterBy.name]]),o("input",{class:"checkmark",type:"checkbox",id:"stock",onChange:e[2]||(e[2]=(...i)=>s.toggleInStock&&s.toggleInStock(...i)),checked:"checked"},null,32),ke,Se,o("select",{class:"select",name:"labels",id:"labels",onChange:e[3]||(e[3]=(...i)=>s.setFilter&&s.setFilter(...i)),multiple:""},we,32),o("div",Be,[o("label",null,[h(o("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=i=>n.filterBy.sortBy=i),onChange:e[5]||(e[5]=(...i)=>s.setFilter&&s.setFilter(...i)),value:"name",hidden:""},null,544),[[$,n.filterBy.sortBy]]),xe]),Fe,o("label",null,[h(o("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=i=>n.filterBy.sortBy=i),onChange:e[7]||(e[7]=(...i)=>s.setFilter&&s.setFilter(...i)),value:"1",hidden:""},null,544),[[$,n.filterBy.sortBy,void 0,{number:!0}]]),Ie]),Ce,o("label",null,[h(o("input",{type:"radio","onUpdate:modelValue":e[8]||(e[8]=i=>n.filterBy.sortBy=i),onChange:e[9]||(e[9]=(...i)=>s.setFilter&&s.setFilter(...i)),value:"-1",hidden:""},null,544),[[$,n.filterBy.sortBy,void 0,{number:!0}]]),De])])])}var Ee=p(be,[["render",Ae]]);const Ne={},Pe={class:"custom-card flex flex-col gap-1 items-center"};function Oe(t,e){return d(),y("article",Pe,[o("header",null,[w(t.$slots,"header",{},void 0,!0)]),o("main",null,[w(t.$slots,"default",{},void 0,!0)]),o("footer",null,[w(t.$slots,"footer",{},void 0,!0)])])}var Ve=p(Ne,[["render",Oe],["__scopeId","data-v-e49d6808"]]);const qe={name:"toy-preview",props:{toy:Object},components:{customCard:Ve},methods:{goToDetail(){this.$router.push(`/toy/${this.toy.id}`)},goToEdit(){this.$router.push(`/toy/edit/${this.toy.id}`)},removeToy(t){this.$emit("removeToy",t)}},computed:{labels(){return this.toy.labels.toString()},inStock(){return this.toy.inStock?"Yes":"No"}}},Me={class:"toy-preview"},ze=o("span",{class:"fw-bold"},"Name:",-1),Re=o("span",{class:"fw-bold"},"Price:",-1),Ue=o("span",{class:"fw-bold"},"Labels:",-1),Le=o("span",{class:"fw-bold"},"Created:",-1),He=o("span",{class:"fw-bold"},"In stock?",-1),Je={class:"btn-group"};function je(t,e,r,l,n,s){const a=f("custom-card");return d(),y("li",Me,[v(a,null,{header:k(()=>[o("p",null,[ze,c(" "+u(r.toy.name),1)]),o("p",null,[Re,c(" "+u(t.$filters.currencyUSD(r.toy.price)),1)]),o("p",null,[Ue,c(" "+u(s.labels),1)]),o("p",null,[Le,c(" "+u(t.$filters.timeFormat(r.toy.createdAt)),1)]),o("p",null,[He,c(" "+u(s.inStock),1)])]),footer:k(()=>[o("div",Je,[o("button",{onClick:e[0]||(e[0]=(...i)=>s.goToEdit&&s.goToEdit(...i)),class:"btn btn-primary"},"edit"),o("button",{onClick:e[1]||(e[1]=(...i)=>s.goToDetail&&s.goToDetail(...i)),class:"btn btn-info"},"details"),o("button",{onClick:e[2]||(e[2]=i=>s.removeToy(r.toy._id)),class:"btn btn-danger"}," delete ")])]),_:1})])}var We=p(qe,[["render",je]]);const Ye={props:{toys:{type:Array,required:!0}},components:{toyPreview:We},created(){console.log(this.toys)},methods:{removeToy(t){this.$emit("removeToy",t)}}},Ge={class:"toy-list clean-list grid gap-3"};function Ke(t,e,r,l,n,s){const a=f("toy-preview");return d(),y("ul",Ge,[(d(!0),y(E,null,N(r.toys,i=>(d(),I(a,{onRemoveToy:s.removeToy,toy:i,key:i._id},null,8,["onRemoveToy","toy"]))),128))])}var Qe=p(Ye,[["render",Ke]]);const Xe={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys},toysToShow(){if(!this.filterBy)return this.toys;const t=new RegExp(this.filterBy.name,"i");return this.toys.filter(e=>t.test(e.name))}},created(){},methods:{loadToys(){m.query().then(t=>this.toys=t)},setFilter(t){this.filterBy=t},goToEdit(){this.$router.push("/toy/edit")},removeToy(t){this.$store.dispatch({type:"removeToy",id:t})}},components:{toyList:Qe,toyFilter:Ee}},Ze={class:"toy-app"};function et(t,e,r,l,n,s){const a=f("toy-filter"),i=f("toy-list");return d(),y("section",Ze,[v(a,{onSetFilter:s.setFilter},null,8,["onSetFilter"]),s.toys?(d(),I(i,{key:0,onRemoveToy:s.removeToy,toys:s.toysToShow},null,8,["onRemoveToy","toys"])):x("",!0),o("button",{onClick:e[0]||(e[0]=(...C)=>s.goToEdit&&s.goToEdit(...C)),class:"btn btn-secondary"},"Add a new toy")])}var tt=p(Xe,[["render",et]]);const ot={name:"toy-detail",data(){return{toy:null}},created(){const{id:t}=this.$route.params;m.getById(t).then(e=>{this.toy=e})},methods:{goBack(){this.$router.push("/toy")}},computed:{labels(){return this.toy.labels.toString()},inStock(){return this.toy.inStock?"Yes":"No"}}},st={key:0,class:"toy-details"},rt=o("span",{class:"fw-bold"},"ID:",-1),nt=o("span",{class:"fw-bold"},"Name:",-1),it=o("span",{class:"fw-bold"},"Price:",-1),lt=o("span",{class:"fw-bold"},"Categories:",-1),at=o("span",{class:"fw-bold"},"Added:",-1),ct=o("span",{class:"fw-bold"},"In stock?",-1);function dt(t,e,r,l,n,s){return n.toy?(d(),y("section",st,[o("article",null,[o("p",null,[rt,c(" "+u(n.toy._id),1)]),o("p",null,[nt,c(" "+u(n.toy.name),1)]),o("p",null,[it,c(" "+u(t.$filters.currencyUSD(n.toy.price)),1)]),o("p",null,[lt,c(" "+u(s.labels),1)]),o("p",null,[at,c(" "+u(t.$filters.timeFormat(n.toy.createdAt)),1)]),o("p",null,[ct,c(" "+u(s.inStock),1)])]),o("button",{onClick:e[0]||(e[0]=(...a)=>s.goBack&&s.goBack(...a)),class:"btn btn-primary"},"go back")])):x("",!0)}var ut=p(ot,[["render",dt]]);const yt={name:"toy-edit",data(){return{toyToEdit:null}},created(){const{id:t}=this.$route.params;t?m.getById(t).then(e=>{this.toyToEdit=e}):this.toyToEdit=m.getEmptyToy()},methods:{goBack(){this.$router.push("/toy")},saveToy(){this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then(()=>{this.$router.push("/toy")})}}},pt={key:0,class:"toy-edit"},mt={class:"form-control"},ft=o("label",{for:"name",class:"form-label"},"Toy Name",-1),_t={class:"form-control"},ht=o("label",{for:"price",class:"form-label"},"Toy Price",-1),vt={class:"btn-group"};function gt(t,e,r,l,n,s){return n.toyToEdit?(d(),y("section",pt,[o("form",{onSubmit:e[4]||(e[4]=P((...a)=>s.saveToy&&s.saveToy(...a),["prevent"])),class:"form"},[o("div",mt,[ft,h(o("input",{required:"","onUpdate:modelValue":e[0]||(e[0]=a=>n.toyToEdit.name=a),id:"name",type:"text",class:"form-input",placeholder:"Enter your toy's name here"},null,512),[[B,n.toyToEdit.name]])]),o("div",_t,[ht,h(o("input",{required:"","onUpdate:modelValue":e[1]||(e[1]=a=>n.toyToEdit.price=a),id:"price",type:"number",class:"form-input"},null,512),[[B,n.toyToEdit.price,void 0,{number:!0}]])]),o("div",vt,[o("button",{onClick:e[2]||(e[2]=(...a)=>s.saveToy&&s.saveToy(...a)),class:"btn btn-info"},"save"),o("button",{onClick:e[3]||(e[3]=(...a)=>s.goBack&&s.goBack(...a)),class:"btn btn-danger-text"},"go back")])],32)])):x("",!0)}var bt=p(yt,[["render",gt]]);const Tt=O({history:V(),linkActiveClass:"active",routes:[{path:"/",name:"home-page",component:re},{path:"/toy",name:"toy-app",component:tt},{path:"/toy/:id",name:"toy-details",component:ut},{path:"/toy/edit/:id?",name:"toy-edit",component:bt}]});var kt={state:{toys:null},getters:{toys(t){return t.toys}},mutations:{setToys(t,{toys:e}){t.toys=e},removeToy(t,{id:e}){const r=t.toys.findIndex(l=>l.id===e);t.toys.splice(r,1)},saveToy(t,{toy:e}){const r=t.toys.findIndex(l=>l.id===e.id);r!==-1?t.toys.splice(r,1,e):t.toys.push(e)}},actions:{loadToys({commit:t}){m.query().then(e=>{t({type:"setToys",toys:e})})},removeToy({commit:t},{id:e}){m.remove(e).then(()=>{t({type:"removeToy",id:e})})},saveToy({commit:t},{toy:e}){m.save(e).then(r=>{t({type:"saveToy",toy:r})})}}};const St=q({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:kt}}),$t={mounted:t=>{t.focus()}};const T=M(X);T.config.globalProperties.$filters={currencyUSD(t){return"$"+t},timeFormat(t){return new Date(t).toDateString()}};T.directive("focus",$t);T.use(Tt);T.use(St);T.mount("#app");
