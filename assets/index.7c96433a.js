import{r as u,o as d,c as m,a as c,b as p,w as S,d as T,F as w,e as $,f as x,g as k,h as B,i as A,j as I}from"./vendor.60bd7a9e.js";const O=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};O();var f=(e,t)=>{const o=e.__vccOpts||e;for(const[r,n]of t)o[r]=n;return o};const N={},D={class:"main-header flex items-center justify-between"},F=c("div",{class:"logo uppercase"},[c("h2",null,"Toys")],-1),P={class:"flex gap-1"},q=T("Home"),H=T("Toy");function M(e,t){const o=u("router-link");return d(),m("header",D,[F,c("nav",P,[p(o,{class:"link",to:"/"},{default:S(()=>[q]),_:1}),p(o,{class:"link",to:"/toy"},{default:S(()=>[H]),_:1})])])}var L=f(N,[["render",M]]);const R={name:"App",components:{appHeader:L}},z=c("h1",null,"Mister Toy",-1);function C(e,t,o,r,n,s){const a=u("app-header"),v=u("router-view");return d(),m(w,null,[z,p(a),p(v)],64)}var V=f(R,[["render",C]]);const J={name:"Home",data(){return{}}},E={class:"home-page"},j=c("h1",null,"Home page",-1),K=[j];function W(e,t,o,r,n,s){return d(),m("section",E,K)}var G=f(J,[["render",W]]);const y={query:l,get:U,post:Y,put:X,remove:Z,postMany:Q};function l(e){var t=JSON.parse(localStorage.getItem(e))||[];return Promise.resolve(t)}function U(e,t){return l(e).then(o=>o.find(r=>r.id===t))}function Y(e,t){return t.id=ee(),l(e).then(o=>(o.push(t),h(e,o),t))}function Q(e,t){return l(e).then(o=>(o.push(...t),h(e,o),o))}function X(e,t){return l(e).then(o=>{const r=o.findIndex(n=>n.id===t.id);return o.splice(r,1,t),h(e,o),t})}function Z(e,t){return l(e).then(o=>{const r=o.findIndex(n=>n.id===t);o.splice(r,1),h(e,o)})}function h(e,t){localStorage.setItem(e,JSON.stringify(t))}function ee(e=8){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}const g={saveToStorage:te,loadFromStorage:oe,makeId:re};function te(e,t){localStorage.setItem(e,JSON.stringify(t)||null)}function oe(e){let t=localStorage.getItem(e);return t?JSON.parse(t):void 0}function re(e=8){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}const i="toys_db";ue();const ne={query:se,getById:ae,remove:ie,save:ce,getEmptyToy:le};function se(){return y.query(i)}function ae(e){y.get(i,e);const t="I bought this toy and it is amazing!";return todo.reviews.push(t)}function ie(e){return y.remove(i,e)}function ce(e){return e.id?y.put(i,e):y.post(i,e)}function le(e,t,o,r=!0){return{_id:g.makeId(),name:"",price:0,labels:[],createdAt:new Date().toDateString(),inStock:r,reviews:["I love this toy!"]}}function ue(){let e=g.loadFromStorage(i);return(!e||!e.length)&&(e=[{_id:"t101",name:"Talking Doll",price:123,labels:["Doll","Battery Powered","Baby"],createdAt:1631031801011,inStock:!0,reviews:["This is a terrible toy. Do not buy!"]},{_id:"t102",name:"Remote Robot",price:98,labels:["Doll","Battery Powered","Outdoor"],createdAt:1631031701011,inStock:!0,reviews:["This is an awesome toy. Buy it now!"]},{_id:"t103",name:"Hot Wheels",price:105,labels:["On wheels","Battery Powered","Outdoor"],createdAt:1631031601011,inStock:!0,reviews:["This is a terrible toy. Do not buy!"]},{_id:"t104",name:"Van Gogh Puzzle",price:145,labels:["Art","Puzzle","Box game"],createdAt:1631031501011,inStock:!0,reviews:["This is an awesome toy. Buy it now!"]},,],g.saveToStorage(i,e)),e}const de={},pe={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys},toysToShow(){if(!this.filterBy)return this.toys;const e=new RegExp(this.filterBy.vendor,"i");return this.toys.filter(t=>e.test(t.vendor))}},created(){},methods:{loadToys(){ne.query().then(e=>this.toys=e)},setFilter(e){this.filterBy=e},removeToy(e){this.$store.dispatch({type:"removeToy",id:e})}},components:{toyList:de}},ye={class:"toy-app"};function me(e,t,o,r,n,s){const a=u("toy-filter"),v=u("toy-list");return d(),m("section",ye,[c("button",{onClick:t[0]||(t[0]=(...b)=>e.goToEdit&&e.goToEdit(...b)),class:"btn btn-secondary"},"Add a new toy"),p(a,{onSetFilter:s.setFilter},null,8,["onSetFilter"]),s.toys?(d(),$(v,{key:0,onRemoveToy:s.removeToy,toys:s.toysToShow},null,8,["onRemoveToy","toys"])):x("",!0)])}var fe=f(pe,[["render",me]]);const he=k({history:B(),linkActiveClass:"active",routes:[{path:"/",name:"home-page",component:G},{path:"/toy",name:"toy-app",component:fe}]});var _e={state:{toys:null},getters:{toys(e){return e.toys}},mutations:{setToys(e,{toys:t}){e.toys=t},removeToy(e,{id:t}){const o=e.toys.findIndex(r=>r.id===t);e.toys.splice(o,1)},saveToy(e,{toy:t}){const o=e.toys.findIndex(r=>r.id===t.id);o!==-1?e.toys.splice(o,1,t):e.toys.push(t)}},actions:{loadToys({commit:e}){toyService.query().then(t=>{e({type:"setToys",toys:t})})},removeToy({commit:e},{id:t}){toyService.remove(t).then(()=>{e({type:"removeToy",id:t})})},saveToy({commit:e},{toy:t}){toyService.save(t).then(o=>{e({type:"saveToy",toy:o})})}}};const ve=A({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:_e}});const _=I(V);_.config.globalProperties.$filters={currencyUSD(e){return"$"+e},timeFormat(e){return new Date(e).toDateString()}};_.use(he);_.use(ve);_.mount("#app");
