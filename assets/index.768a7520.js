import{r as f,o as d,c as y,a as g,F as T,b as m,d as x,e as $,f as I,g as b,h as k,i as A}from"./vendor.53c18b52.js";const F=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}};F();var h=(e,t)=>{const o=e.__vccOpts||e;for(const[n,r]of t)o[n]=r;return o};const N={name:"App",data(){return{msg:"Hellooooo there"}}},B=m("h1",null,"Mister Toy",-1);function O(e,t,o,n,r,s){const a=f("router-view");return d(),y(T,null,[B,g(a)],64)}var q=h(N,[["render",O]]);const M={name:"Home",data(){return{}}},w={class:"home-page"},H=m("h1",null,"Home page",-1),L=[H];function C(e,t,o,n,r,s){return d(),y("section",w,L)}var E=h(M,[["render",C]]);const l={query:i,get:J,post:P,put:V,remove:K,postMany:R};function i(e){var t=JSON.parse(localStorage.getItem(e))||[];return Promise.resolve(t)}function J(e,t){return i(e).then(o=>o.find(n=>n.id===t))}function P(e,t){return t.id=D(),i(e).then(o=>(o.push(t),p(e,o),t))}function R(e,t){return i(e).then(o=>(o.push(...t),p(e,o),o))}function V(e,t){return i(e).then(o=>{const n=o.findIndex(r=>r.id===t.id);return o.splice(n,1,t),p(e,o),t})}function K(e,t){return i(e).then(o=>{const n=o.findIndex(r=>r.id===t);o.splice(n,1),p(e,o)})}function p(e,t){localStorage.setItem(e,JSON.stringify(t))}function D(e=8){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}const u={saveToStorage:W,loadFromStorage:Y,makeId:j};function W(e,t){localStorage.setItem(e,JSON.stringify(t)||null)}function Y(e){let t=localStorage.getItem(e);return t?JSON.parse(t):void 0}function j(e=8){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}const c="toys_db";ee();const z={query:G,getById:Q,remove:U,save:X,getEmptyToy:Z};function G(){return l.query(c)}function Q(e){return l.get(c,e)}function U(e){return l.remove(c,e)}function X(e){return e.id?l.put(c,e):l.post(c,e)}function Z(){return{name:"",price:0,labels:[],createdAt:Date.now()}}function ee(){let e=u.loadFromStorage(c);return(!e||!e.length)&&(e=[{id:u.makeId(),vendor:"Fiat",speed:30,price:980},{id:u.makeId(),vendor:"Honda",speed:87,price:500},{id:u.makeId(),vendor:"Toyota",speed:54,price:305}],u.saveToStorage(c,e)),e}const te={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys},toysToShow(){if(!this.filterBy)return this.toys;const e=new RegExp(this.filterBy.vendor,"i");return this.toys.filter(t=>e.test(t.vendor))}},created(){},methods:{loadToys(){z.query().then(e=>this.toys=e)},setFilter(e){this.filterBy=e},goToEdit(){this.$router.push("/toy/edit")},removeToy(e){this.$store.dispatch({type:"removeToy",id:e})}},components:{}},oe={class:"toy-app"};function re(e,t,o,n,r,s){const a=f("toy-filter"),_=f("toy-list");return d(),y("section",oe,[m("button",{onClick:t[0]||(t[0]=(...S)=>s.goToEdit&&s.goToEdit(...S)),class:"btn btn-secondary"},"Add a new toy"),g(a,{onSetFilter:s.setFilter},null,8,["onSetFilter"]),s.toys?(d(),x(_,{key:0,onRemoveToy:s.removeToy,toys:s.toysToShow},null,8,["onRemoveToy","toys"])):$("",!0)])}var ne=h(te,[["render",re]]);const se=I({history:b(),linkActiveClass:"active",routes:[{path:"/",name:"home-page",component:E},{path:"/toy",name:"toy-app",component:ne}]});var ae={state:{toys:null},getters:{toys(e){return e.toys}},mutations:{setToys(e,{toys:t}){e.toys=t},removeToy(e,{id:t}){const o=e.toys.findIndex(n=>n.id===t);e.toys.splice(o,1)},saveToy(e,{toy:t}){const o=e.toys.findIndex(n=>n.id===t.id);o!==-1?e.toys.splice(o,1,t):e.toys.push(t)}},actions:{loadToys({commit:e}){toyService.query().then(t=>{e({type:"setToys",toys:t})})},removeToy({commit:e},{id:t}){toyService.remove(t).then(()=>{e({type:"removeToy",id:t})})},saveToy({commit:e},{toy:t}){toyService.save(t).then(o=>{e({type:"saveToy",toy:o})})}}};const ce=k({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:ae}});const v=A(q);v.use(se);v.use(ce);v.mount("#app");
